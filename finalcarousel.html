<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      .containerhrsc {
        width: 92%;
        padding: 1rem;
      }

      .containerhrsc h2 {
        font-weight: 300;
        margin-bottom: 1rem;
      }

      #carousell-container {
        width: 96%;
        height: 400px;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        border-radius: 0.2rem;
        background-color: white;
        border-radius: 0.2rem;
        overflow: hidden;
        margin: auto;
      }

      #carousell-container #carousell-content {
        display: flex;
        align-items: center;
        justify-content: center;
        position: absolute;
        top: 50%;
        left: 0.5rem;
        transition: all 0.3s ease;
        transform: translateY(-50%);
      }

      #carousell-content .boxforsinglecard {
        width: 300px;
        height: 380px;
        background-color: white;
        margin-right: 1rem;
        /* padding: 1.2rem; */
        border-radius: 0.5rem;
        box-shadow: 1px 1px 16px 1px rgb(223, 204, 204);
        border: 0.5px rgb(231, 224, 224);
      }

      .btn {
        position: absolute;
        top: 50%;
        width: 50px;
        height: 50px;
        border: 50%;
        border-radius: 50%;
        outline: none;
        border: none;
        cursor: pointer;
        transform: translateY(-50%) scale(0.5);
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
        background-color: white;
      }

      .btn.show {
        transform: translateY(-50%) scale(1);
        opacity: 1;
        visibility: visible;
      }

      .btn.left {
        left: 0.1rem;
      }

      .btn.right {
        right: 0.1rem;
      }
      /*# sourceMappingURL=final-scroll.sass.css.map */
      #image1 {
        height: 70%;
        width: 100%;
        border-radius: 3px;
        text-align: right;
        background-repeat: no-repeat;
      }

      .cardsinglecard {
        /* Add shadows to create the "card" effect */
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
        transition: 0.3s;
        height: 100%;
        width: 100%;

        border-radius: 3px;
        margin-right: 15px;
      }
      .boxforsinglecard {
        height: 420px;
        width: 300px;
      }

      .containerofsinglecard {
        margin-left: 4%;
      }
      .checked{
        color: orange;
        /* border: 1px solid black; */
    }
    .unchecked{
        /* border: 1px solid black; */
        color: grey;
    }
    </style>
  </head>
  <body>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@400;700&display=swap" rel="stylesheet">
    <path
        d="M8.695 16.682C4.06 12.382 1 9.536 1 6.065 1 3.219 3.178 1 5.95 1c1.566 0 3.069.746 4.05 1.915C10.981 1.745 12.484 1 14.05 1 16.822 1 19 3.22 19 6.065c0 3.471-3.06 6.316-7.695 10.617L10 17.897l-1.305-1.215z"
        fill="#2874F0" class="eX72wL" stroke="#FFF" fill-rule="evenodd" opacity=".9"></path>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <div class="containerhrsc">
      <h2>SmartPhones</h2>

      <div id="carousell-container">
        <div id="carousell-content"></div>
        <div class="controls">
          <button class="btn left show" id="carousellLeftBtn">&lt;</button>
          <button class="btn right show" id="carousellRightBtn">&gt;</button>
        </div>
      </div>
    </div>

    <script>
        
        let croma_data = JSON.parse(localStorage.getItem("CromaProducts"));

        let SmartPhones = [];
        
        croma_data.forEach((product) => {
            if (product.Category == "mobile") {
          SmartPhones.push(product);
        }
    });
    
    let string = "";
    
    let container = document.getElementById("carousell-content");
    
    SmartPhones.forEach(function (element) {
        let name = element.Name;
        let new_name = "";
        
        if(name.length > 40)
        {
            for(let i=0;i<40;i++)
            {
                new_name = new_name + name[i];
            }
            name = new_name + "...";
        }
        let star_Rating = "";
        
        for (let i = 1; i <= 5; i++) {
            if (i < (Math.floor(element.Rating) + 1)) {
                star_Rating += '<span class = "fa fa-star checked"></span>';
                
            } else {
                star_Rating += '<span class = "fa fa-star unchecked"></span>';
                
            }
        }
        
        let text = `<div class="boxforsinglecard">
            <div class="cardsinglecard">
                <div id="image1" style="width:100%; background-image: url(${element.Image});">
                    <span class="material-icons" style="color:red;margin-right:3%;margin-top:3%;">favorite_border </span>
                    </div>
                    
                    <div class="containerofsinglecard">
                        <div style="margin-top:-10px;margin-bottom:15px;font-size:20px"><b>${name}</b></div>
                        <div style="margin-top:4px;font-size:20px"><b>₹${element.New_Price}</b><strike style="margin-left:60px">       ₹${element.Old_Price}</strike></div>
                        <div style="margin-top:15px;font-size:15px">${star_Rating}</div>
                        </div>
                        </div>
                        
                        </div>`;
                        
                        // container.append(text);
                        string += text;
                    });
                    // console.log(container)
                    
                    container.innerHTML = string;
                    let k1 = 0;
                    (function () {
                      var carousellContent = document.querySelector("#carousell-container");
                      var carousellLeftBtn = document.querySelector("#carousellLeftBtn");
                      var carousellRightBtn = document.querySelector("#carousellRightBtn");
                  
                      var carousellLeftValue = 0;
                      var totalWidth = carousellContent.getBoundingClientRect().width;
                      var widthToMove = 250 + 16 + 250 + 16;
                      var arrowBtnWidth = 50;
                      var noOfSlides = totalWidth / widthToMove;
                      var currentSlide = 1;
                  
                      carousellLeftBtn.addEventListener("click", moveCarousellRight);
                      carousellRightBtn.addEventListener("click", moveCarousellLeft);
                      manageButtons();
                  
                      function moveCarousellLeft() {
                        if (k1 < 2) {
                          if (currentSlide == 1) {
                            carousellLeftValue -= widthToMove - arrowBtnWidth;
                          } else {
                            carousellLeftValue -= widthToMove;
                          }
                  
                          currentSlide++;
                          manageButtons();
                  
                          carousellContent.style.left = `${carousellLeftValue}px`;
                          k1++;
                        }
                      }
                  
                      function moveCarousellRight() {
                        if (k1 > 0) {
                          if (currentSlide == 2) {
                            carousellLeftValue = 8;
                          } else {
                            carousellLeftValue += widthToMove;
                          }
                  
                          currentSlide--;
                          manageButtons();
                  
                          carousellContent.style.left = `${carousellLeftValue}px`;
                          k1--;
                        }
                      }
                  
                      function manageButtons() {
                        if (currentSlide == noOfSlides - 1) {
                          carousellRightBtn.classList.remove("show");
                        } else {
                          carousellRightBtn.classList.add("show");
                        }
                  
                        if (currentSlide == 1) {
                          carousellLeftBtn.classList.remove("show");
                        } else {
                          carousellLeftBtn.classList.add("show");
                        }
                      }
                    })();
                    </script>
  </body>
  </html>
  